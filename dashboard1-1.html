<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Employee Portal Dashboard</title>

<style>
:root{
  --bg:#0f1724;
  --card:#0b1220;
  --accent:#06b6d4;
  --muted:#9aa4b2;
}
*{box-sizing:border-box;font-family:Inter,system-ui,sans-serif}
body{
  margin:0;
  background:linear-gradient(180deg,#071023,#071826);
  color:#e6eef6;
}
.hidden{display:none}
.wrap{max-width:1100px;margin:28px auto;padding:20px}
.card{background:var(--card);padding:20px;border-radius:12px}
input,button{
  padding:10px;border-radius:8px;border:none
}
button{
  background:var(--accent);
  color:#02122a;
  font-weight:700;
  cursor:pointer
}

/* DASHBOARD STYLES */
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
.logo{
  width:56px;height:56px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent),#7c3aed);
  display:flex;align-items:center;justify-content:center;
  font-weight:800;color:#02122a
}
main{display:grid;grid-template-columns:260px 1fr;gap:18px}
.sidebar{background:var(--card);padding:14px;border-radius:12px}
.menu button{
  width:100%;margin-top:6px;background:none;color:#9aa4b2
}
.menu button.active,.menu button:hover{
  background:#071826;color:white
}
.cards{display:flex;gap:12px;flex-wrap:wrap}
.cardBox{
  background:var(--card);padding:14px;border-radius:12px;flex:1
}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.05)}
</style>
</head>

<body>

<!-- LOGIN PAGE -->
<div class="wrap" id="loginPage">
  <div class="card" style="max-width:400px;margin:auto">
    <h2>Employee Login</h2>
    <input id="username" placeholder="Enter your name">
    <br><br>
    <button onclick="login()">Login</button>
  </div>
</div>

<!-- DASHBOARD -->
<div class="wrap hidden" id="dashboardPage">

<header>
  <div style="display:flex;gap:12px;align-items:center">
    <div class="logo">GCC</div>
    <div>
      <h2>Employee Dashboard</h2>
      <small id="empName"></small>
    </div>
  </div>
  <div id="datetime"></div>
</header>

<main>
<aside class="sidebar">
  <div class="menu">
    <button class="active">Dashboard</button>
    <button onclick="logout()">Logout</button>
  </div>
</aside>

<section>
  <div class="cards">
    <div class="cardBox">
      <h4>Date</h4>
      <p id="todayDate"></p>
    </div>
    <div class="cardBox">
      <h4>Clock In</h4>
      <p id="clockIn">—</p>
    </div>
    <div class="cardBox">
      <h4>Clock Out</h4>
      <p id="clockOut">—</p>
    </div>
  </div>

  <br>

  <h3>Attendance History</h3>
  <table>
    <thead>
      <tr><th>Date</th><th>Time In</th><th>Time Out</th></tr>
    </thead>
    <tbody id="attTable"></tbody>
  </table>
</section>
</main>
</div>

<script>
const $=id=>document.getElementById(id);

function todayKey(){
  return new Date().toISOString().slice(0,10);
}

/* CLOCK */
setInterval(()=>{
 const d=new Date();
 $('datetime').textContent=d.toLocaleTimeString()+" • "+d.toLocaleDateString();
 $('todayDate').textContent=d.toDateString();
},1000);

/* LOGIN = AUTO CLOCK IN */
function login(){
 const name=$('username').value;
 if(!name) return alert("Enter name");

 localStorage.currentUser=name;

 let att=JSON.parse(localStorage.att||'[]');
 if(!att.find(r=>r.key===todayKey())){
   att.push({
     key:todayKey(),
     name,
     date:new Date().toLocaleDateString(),
     in:new Date().toLocaleTimeString(),
     out:""
   });
   localStorage.att=JSON.stringify(att);
 }
 loadDashboard();
}

/* LOAD DASHBOARD */
function loadDashboard(){
 $('loginPage').classList.add('hidden');
 $('dashboardPage').classList.remove('hidden');
 $('empName').textContent=localStorage.currentUser;
 renderAttendance();
}

/* LOGOUT = AUTO CLOCK OUT */
function logout(){
 let att=JSON.parse(localStorage.att||'[]');
 let rec=att.find(r=>r.key===todayKey());
 if(rec && !rec.out){
   rec.out=new Date().toLocaleTimeString();
   localStorage.att=JSON.stringify(att);
 }
 localStorage.removeItem('currentUser');
 location.reload();
}

/* ATTENDANCE DISPLAY */
function renderAttendance(){
 let att=JSON.parse(localStorage.att||'[]');
 $('attTable').innerHTML="";
 att.slice().reverse().forEach(r=>{
   $('attTable').innerHTML+=`
     <tr>
       <td>${r.date}</td>
       <td>${r.in}</td>
       <td>${r.out||'—'}</td>
     </tr>`;
 });
 let today=att.find(r=>r.key===todayKey());
 if(today){
   $('clockIn').textContent=today.in;
   $('clockOut').textContent=today.out||'—';
 }
}

/* AUTO LOAD */
if(localStorage.currentUser){
 loadDashboard();
}
</script>

</body>
</html>
