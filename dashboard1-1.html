<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Dashboard</title>
<style>
:root{
  --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#9aa4b2;
}
*{box-sizing:border-box;font-family:Inter,system-ui,sans-serif;}
body{margin:0;background:linear-gradient(180deg,#071023,#071826);color:#e6eef6;}
.wrap{max-width:1100px;margin:28px auto;padding:20px;}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;}
.brand{display:flex;gap:12px;align-items:center;}
.logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:800;color:#02122a;}
.sub{font-size:13px;color:var(--muted);}
.clock{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;font-weight:600;}
main{display:grid;grid-template-columns:260px 1fr;gap:18px;}
.sidebar{background:var(--card);padding:14px;border-radius:12px;}
.profile{display:flex;gap:12px;align-items:center;}
.avatar{width:56px;height:56px;border-radius:10px;background:#12203a;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);}
.menu{margin-top:18px;display:flex;flex-direction:column;gap:8px;}
.menu button{background:transparent;border:none;color:var(--muted);padding:10px;border-radius:8px;text-align:left;font-weight:600;cursor:pointer;}
.menu button.active,.menu button:hover{background:#071826;color:#fff;}
.content{display:flex;flex-direction:column;gap:16px;}
.cards{display:flex;gap:12px;flex-wrap:wrap;}
.card{background:var(--card);padding:14px;border-radius:12px;flex:1;min-width:160px;}
.card h3{font-size:12px;color:var(--muted);}
.card p{font-size:20px;font-weight:700;}
@media(max-width:900px){main{grid-template-columns:1fr}.cards{flex-direction:column;}}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="brand">
    <div class="logo">GCC</div>
    <div>
      <h1>Gardner College Cashier Portal</h1>
      <p class="sub">Employee Dashboard</p>
    </div>
  </div>
  <div class="clock" id="datetime"></div>
</header>

<main>
<aside class="sidebar">
  <div class="profile">
    <div class="avatar" id="avatar">A</div>
    <div>
      <div class="name" id="empName">Admin</div>
      <div class="sub" id="empRole">Cashier Staff</div>
    </div>
  </div>
  <nav class="menu">
    <button class="active" data-section="dashboard">Dashboard</button>
  </nav>
</aside>

<section class="content">
<div id="dashboardSection" class="section">
  <div class="cards">
    <div class="card"><h3>Today</h3><p id="todayDate"></p></div>
    <div class="card"><h3>Clock In</h3><p id="clockIn">—</p></div>
    <div class="card"><h3>Clock Out</h3><p id="clockOut">—</p></div>
  </div>
</div>
</section>
</main>
</div>

<script>
const $ = id => document.getElementById(id);

/* --- Clock --- */
setInterval(()=>{
 const d = new Date();
 $('datetime').textContent = d.toLocaleTimeString() + ' • ' + d.toLocaleDateString();
 $('todayDate').textContent = d.toDateString();
},1000);

/* --- Attendance --- */
function todayKey(){ return new Date().toISOString().slice(0,10); }

function renderAttendance(){
    let a = JSON.parse(localStorage.getItem('ep_att')||'[]');
    const today = a.find(r=>r.key===todayKey());
    $('clockIn').textContent = today?.in || '—';
    $('clockOut').textContent = today?.out || '—';
}

// Auto Clock In if login happened
(function autoClockIn(){
    const cashier = localStorage.getItem('cashierName');
    if(!cashier) return; // No one logged in

    let a = JSON.parse(localStorage.getItem('ep_att')||'[]');
    let rec = a.find(r=>r.key===todayKey());
    const now = new Date();
    const timeNow = now.toLocaleTimeString();
    const dateNow = now.toLocaleDateString();

    if(!rec){
        rec = { key: todayKey(), date: dateNow, in: timeNow, out: "" };
        a.push(rec);
        localStorage.setItem('ep_att', JSON.stringify(a));
    } else if(!rec.in){
        rec.in = timeNow;
        localStorage.setItem('ep_att', JSON.stringify(a));
    }

    renderAttendance();
})();

// Update dashboard if ep_att changes (e.g., logout)
window.addEventListener('storage', (event)=>{
    if(event.key === 'ep_att'){
        renderAttendance();
    }
});

renderAttendance();
</script>
</body>
</html>
